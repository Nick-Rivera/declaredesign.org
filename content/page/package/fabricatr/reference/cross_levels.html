---
title: "fabricatr"
---

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates panel or cross-classified data</h1>
    </div>

    
    <p>This function allows the user to create data structures that are paneled or
cross-classified: where one level of observation draws simultaneously from
two or many source levels. Common examples of panels include country-year
data which have country-level and year-level characteristics.</p>
    

    <pre class="usage"><span class='fu'>cross_levels</span>(<span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>link_levels</span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>by</th>
      <td><p>The result of a call to <code><a href='join.html'>join()</a></code> which specifies how
the cross-classified data will be created</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>A variable or series of variables to add to the resulting data
frame after the cross-classified data is created.</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>The number of observations in the resulting data frame.
If <code>N</code> is NULL or not provided, the join will be an "outer product" --
merging each row of each provided data frame with each other data frame to
make a full panel.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data.frame</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>By specifying the appropriate arguments in <code><a href='join.html'>join()</a></code> within the
function call, it is possible to induce correlation in cross-classified data.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Generate full panel data</span>
<span class='no'>panel</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='fabricate.html'>fabricate</a></span>(
 <span class='kw'>countries</span> <span class='kw'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>country_shock</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='no'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span>)),
 <span class='kw'>years</span> <span class='kw'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>year_shock</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='no'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span>), <span class='kw'>nest</span><span class='kw'>=</span><span class='fl'>FALSE</span>),
 <span class='kw'>obs</span> <span class='kw'>=</span> <span class='fu'>cross_levels</span>(<span class='kw'>by</span><span class='kw'>=</span><span class='fu'><a href='join.html'>join</a></span>(<span class='no'>countries</span>, <span class='no'>years</span>), <span class='kw'>GDP_it</span> <span class='kw'>=</span> <span class='no'>country_shock</span> + <span class='no'>year_shock</span>)
)

<span class='co'># Include an "N" argument to allow for cross-classified</span>
<span class='co'># data.</span>
<span class='no'>students</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='fabricate.html'>fabricate</a></span>(
 <span class='kw'>primary_school</span> <span class='kw'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>ps_quality</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='no'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span>)),
 <span class='kw'>secondary_school</span> <span class='kw'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>15</span>, <span class='kw'>ss_quality</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='no'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span>), <span class='kw'>nest</span><span class='kw'>=</span><span class='fl'>FALSE</span>),
 <span class='kw'>students</span> <span class='kw'>=</span> <span class='fu'>link_levels</span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='join.html'>join</a></span>(<span class='no'>primary_school</span>, <span class='no'>secondary_school</span>))
)
<span class='fu'>head</span>(<span class='no'>students</span>)</div><div class='output co'>#&gt;   primary_school ps_quality secondary_school ss_quality students
#&gt; 1             16   7.998810               08   8.158399      001
#&gt; 2             03   6.209033               12   9.282482      002
#&gt; 3             11   5.758383               12   9.282482      003
#&gt; 4             03   6.209033               14   4.921463      004
#&gt; 5             11   5.758383               14   4.921463      005
#&gt; 6             11   5.758383               07   1.214891      006</div><div class='input'>
<span class='co'># Induce a correlation structure in cross-classified data by providing</span>
<span class='co'># rho.</span>
<span class='no'>students</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='fabricate.html'>fabricate</a></span>(
 <span class='kw'>primary_school</span> <span class='kw'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>ps_quality</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='no'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span>)),
 <span class='kw'>secondary_school</span> <span class='kw'>=</span> <span class='fu'><a href='fabricate.html'>add_level</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>15</span>, <span class='kw'>ss_quality</span> <span class='kw'>=</span> <span class='fu'>runif</span>(<span class='no'>N</span>, <span class='fl'>1</span>, <span class='fl'>10</span>), <span class='kw'>nest</span><span class='kw'>=</span><span class='fl'>FALSE</span>),
 <span class='kw'>students</span> <span class='kw'>=</span> <span class='fu'>link_levels</span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'><a href='join.html'>join</a></span>(<span class='no'>ps_quality</span>, <span class='no'>ss_quality</span>, <span class='kw'>rho</span> <span class='kw'>=</span> <span class='fl'>0.5</span>))
)</div><div class='output co'>#&gt; <span class='message'>`link_levels()` calls are faster if the `mvnfast` package is installed.</span></div><div class='input'><span class='fu'>cor</span>(<span class='no'>students</span>$<span class='no'>ps_quality</span>, <span class='no'>students</span>$<span class='no'>ss_quality</span>)</div><div class='output co'>#&gt; [1] 0.4335201</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>
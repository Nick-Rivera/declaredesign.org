---
output: github_document
---



<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="estimatr-fast-estimators-for-design-based-inference" class="section level1">
<h1>estimatr: Fast Estimators for Design-Based Inference</h1>
<p><a href="cran.r-project.org/package=estimatr"><img src="https://www.r-pkg.org/badges/version/estimatr" alt="CRAN Status" /></a>
<a href="https://travis-ci.org/DeclareDesign/estimatr"><img src="https://travis-ci.org/DeclareDesign/estimatr.svg?branch=master" alt="Travis-CI Build Status" /></a>
<a href="https://ci.appveyor.com/project/DeclareDesign/estimatr"><img src="https://ci.appveyor.com/api/projects/status/github/DeclareDesign/estimatr?branch=master&amp;svg=true" alt="AppVeyor Build Status" /></a>
<a href="https://coveralls.io/github/DeclareDesign/estimatr?branch=master"><img src="https://coveralls.io/repos/github/DeclareDesign/estimatr/badge.svg?branch=master" alt="Coverage Status" /></a></p>
<p>Technical papers and textbooks demand complex estimation strategies that are often difficult to implement, even for scientists who are expert coders. The result is slow code copied and pasted from the internet, where the result is taken on faith.</p>
<p><strong>estimatr</strong> provides a small set of commonly-used estimators (methods for estimating quantities of interest like treatment effects or regression parameters), using <code>C++</code> for speed, and implemented in <code>R</code> with simple, accessible syntax. We include two functions that implement means estimators, <a href="http://estimatr.declaredesign.org/reference/difference_in_means.html"><code>difference_in_means()</code></a> and <a href="http://estimatr.declaredesign.org/reference/horvitz_thompson.html"><code>horvitz_thompson()</code></a>. In addition, we include two functions for linear regression estimators, <a href="http://estimatr.declaredesign.org/reference/lm_robust.html"><code>lm_robust()</code></a> and <a href="http://estimatr.declaredesign.org/reference/lm_lin.html"><code>lm_lin()</code></a>. In each case, scientists can choose an estimator to reflect cluster-randomized, block-randomized, and block-and-cluster-randomized designs. The <a href="http://estimatr.declaredesign.org/articles/getting-started.html">Getting Started Guide</a> describes each estimator provided by <strong>estimatr</strong> and how it can be used in your analysis.</p>
<p>Fast estimators also enable fast simulation of research designs to learn about their properties (see <a href="http://declaredesign.org">DeclareDesign</a>).</p>
<div id="installing-estimatr" class="section level3">
<h3>Installing estimatr</h3>
<p>To install the latest stable release of <strong>estimatr</strong>, please ensure that you are running version 3.3 or later of R and run the following code:</p>
<pre class="r"><code>install.packages(&quot;estimatr&quot;)</code></pre>
<p>If you would like to use the latest development release of <strong>estimatr</strong>, please ensure that you are running version 3.3 or later of R and run the following code:</p>
<pre class="r"><code>install.packages(&quot;estimatr&quot;, dependencies = TRUE,
                 repos = c(&quot;http://r.declaredesign.org&quot;, &quot;https://cloud.r-project.org&quot;))</code></pre>
</div>
<div id="easy-to-use" class="section level3">
<h3>Easy to use</h3>
<p>Once the package is installed, getting appropriate estimates and standard errors is now both fast and easy.</p>
<pre class="r"><code>library(estimatr)

# sample data from cluster-randomized experiment
library(fabricatr)
library(randomizr)
dat &lt;- fabricate(
  N = 100,
  y = rnorm(N),
  clusterID = sample(letters[1:10], size = N, replace = TRUE),
  z = cluster_ra(clusterID)
)

# robust standard errors
res_rob &lt;- lm_robust(y ~ z, data = dat)

# cluster robust standard errors
res_cl &lt;- lm_robust(y ~ z, data = dat, clusters = clusterID)
summary(res_cl)
#&gt; 
#&gt; Call:
#&gt; lm_robust(formula = y ~ z, data = dat, clusters = clusterID)
#&gt; 
#&gt; Standard error type =  CR2 
#&gt; 
#&gt; Coefficients:
#&gt;             Estimate Std. Error Pr(&gt;|t|) CI Lower CI Upper   DF
#&gt; (Intercept)   -0.180      0.200    0.428   -0.777    0.417 3.38
#&gt; z              0.424      0.236    0.118   -0.142    0.990 6.54
#&gt; 
#&gt; Multiple R-squared:  0.0419 ,    Adjusted R-squared:  0.0321 
#&gt; F-statistic: 4.28 on 1 and 98 DF,  p-value: 0.0411

# matched-pair design learned from blocks argument
data(sleep)
res_dim &lt;- difference_in_means(extra ~ group, data = sleep, blocks = ID)</code></pre>
<p>The <a href="http://estimatr.declaredesign.org/articles/getting-started.html">Getting Started Guide</a> has more examples and uses, as do the reference pages. The <a href="http://estimatr.declaredesign.org/articles/mathematical-notes.html">Mathematical Notes</a> provide more information about what each estimator is doing under the hood.</p>
</div>
<div id="fast-to-use" class="section level3">
<h3>Fast to use</h3>
<p>Getting estimates and robust standard errors is also faster than it used to be. Compare our package to using <code>lm()</code> and the <code>sandwich</code> package to get HC2 standard errors. More speed comparisons are available <a href="http://estimatr.declaredesign.org/articles/benchmarking%20estimatr.html">here</a>.</p>
<pre class="r"><code># example code
# estimatr
lm_robust(y ~ x1 + x2 + x3 + x4, data = dat)

# usual specification (lm + sandwich)
library(lmtest)
library(sandwich)
lm_out &lt;- lm(y ~ x1 + x2 + x3 + x4, data = dat)
coeftest(lm_out, vcov = vcovHC(lm_out, type = &#39;HC2&#39;))</code></pre>
<p><img src="vignettes/lm_speed.png" /></p>
<p><img src="vignettes/lm_speed_covars.png" /></p>
<hr />
<p>This project is generously supported by a grant from the <a href="http://www.arnoldfoundation.org">Laura and John Arnold Foundation</a> and seed funding from <a href="http://egap.org">Evidence in Governance and Politics (EGAP)</a>.</p>
</div>
</div>
